---
title: Java面向对象——继承性
date: 2021/5/3
tags: [继承性]
categories: Java
---

## Java 面向对象继承性 extends

- 当两种类中有相似的属性及方法，通过继承的关系可以实现类中复用继承对象的属性和方法

### 继承性的好处

- 减少代码的冗余，提高了复用性
- 便于功能的扩展（将子类共有的功能放在父类里进行继承）

### 继承性的使用

- 语法：`public class A extends B{...}`
- A：子类、派生类、subclass
- B：父类、超类、基类、superclass
- 体现：
  - 一旦子类继承父类 B 以后，子类 A 中就获取了父类 B 中声明的结构（所有属性、方法），注意私有结构还是有原来的封装性
  - 子类继承父类之后，还能定义自己特有的属性和方法，实现功能的扩展

### Java 中关于继承性的规定

- Java 只支持单继承和多层继承

  - 一个类可以有多个子类继承：`一个父亲可以有多个儿子`
  - 一个类只能有一个类：`一个儿子只能有一个父亲`
  - 父类上面还能有父类：`A（间接父类）->B（直接父类）->C（子类）...`

- 所有类继承（直接继承或间接继承）于 `java.lang.Object` 类，意味着所有 Java 类都具有 Object 类声明的功能

### 方法的重写 override/overwrite

- 定义：在子类中可以根据需要对父类中继承来的方法进行改造，也称为方法的重置、覆盖
- 重写以后，当实例化子类对象以后，通过子类对象调用子类中的同名同参的方法时，实际执行的是子类重写父类的方法
- 规定
  - 方法的声明：`权限修饰符 返回值类型 方法名（形参列表） throws 异常的类型{...}`
  - 两者的方法名和形参列表得一样
  - 子类覆盖父类方法的权限修饰符不能小于父类被重写的方法的权限修饰符
    - 特殊情况：子类中不能重写父类中声明为 private 的权限方法
  - 返回值类型
    - 父类被重写的方法返回值为 void，子类重写的方法返回值也为 void
    - 父类被重写的方法返回值为 A 类，子类重写的方法返回值为 A 类或者 A 类的子类
    - 父类被重写的方法返回值为基本数据类型，子类重写的方法返回值为相同的基本数据类型
    - 子类重写的方法抛出的异常类型不大于父类被重写的方法抛出的异常类型
- 子类和父类中的同名同参数的方法要么都声明为非 static（可考虑重写），要么都声明为 static 的

### protected 权限修饰符

- 权限比缺省更大，比 public 更小
- 修饰的可在不同包的子类下访问

### super 关键字

- super 理解为父类的，可以用来调用属性、方法、构造器
- this 在继承里的使用，在子类的方法或构造器里使用 `this.xxx` 可以取 xxx 属性或方法（先在子类里取，没取到再去继承的父类里取）
- super 调用属性和方法
  - 为了区分子父类里同名同类的属性
  - 当子类和父类里有同名同类的属性时，当子类实例化时会在堆空间同时开辟两个空间存放，使用 this 取子类属性，使用 super 取继承父类的同名属性
  - 当子类重写了父类中的方法之后，想在子类中调用父类中被重写的方法时，必须使用 super 显式调用父类中被重写的方法
- super 调用构造器
  - 可以在子类的构造器中显式的使用`super(形参列表)`来调用父类中声明指定的构造器
  - `super(形参列表)`必须声明在子类构造器的首行，故在类的构造器，`this(形参列表)`和`super(形参列表)`只能二选一
  - 在子类的构造器没有显式的声明则会默认调用`super()`父类空参构造器
  - 在类的多个构造器中，至少有一个构造器调用了`super()`

### 子类对象实例化的过程

- 结果上看：（继承性）
  - 子类继承父类之后，就获取了父类中声明的属性或方法
  - 创建子类的对象，在堆空间里，就会加载所有父类中声明的属性
- 过程上看：
  - 通过子类的构造器创建子类对象时，一定会直接或间接的调用父类的构造器，进而再调用父类的构造器。。。直到`java.lang.Object`类空参的构造器
