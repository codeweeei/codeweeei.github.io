---
title: 操作系统简介
date: 2021/4/9
tags: [操作系统]
categories: 计算机基础
---

# 操作系统简介

## 操作系统的基础

### 为什么要有操作系统

- 程序员无法把所有的硬件操作细节都了解清楚，管理这些硬件并且加以优化是一件非常繁琐的工作，而这个繁琐的工作就是操作系统的工作，程序员只需要考虑自己的应用软件的编写就可以了，利用应用软件来直接使用操作系统提供的功能来间接使用硬件

### 什么是操作系统

- 操作系统就是一个协调、管理和控制计算机硬件资源的软件资源的控制程序（软件）
- 操作系统位于计算机硬件与应用软件之间，本质也是一个软件。
- 操作系统的组成
  - 操作系统的内核（运行于内核态，管理硬件资源）
  - 系统调用（运行于用户态，为应用程序员写的应用程序提供系统调用接口）

### 操作系统的功能

- 隐藏了丑陋的硬件调用接口，为应用程序员提供调用硬件资源的更好、更简单、更清晰的模型（系统调用接口）
  - 比如操作系统提供了文件这个抽象概念，对文件的操作就是对磁盘的操作，有了文件我们无需再去考虑关于磁盘的读写控制（比如控制磁盘转动，移动磁头读写数据等细节
- 将应用程序对硬件资源的竞态请求变得有序化
  - 例如很多应用软件其实是共享一套计算机硬件，比方说有可能有三个应用程序同时需要申请打印机来输出内容，那么 a 程序竞争到了打印机资源就打印，然后可能是 b 竞争到打印机资源，也可能是 c，这就导致了无序，打印机可能打印一段 a 的内容然后又去打印 c...,操作系统的一个功能就是将这种无序变得有序。
- 操作系统优化的基本原则
  - 针对读操作：数据能从内存取就不要从硬盘取
  - 针对写操作：在内存中攒一波再写入硬盘

### 操作系统与普通软件的区别

- 主要区别是普通软件可以被用户修改，而操作系统由硬件保护，不能被用户修改

### 操作系统的发展

1. 第一代计算机（真空管）

- 特点：没有操作系统的概念，所有程序设计都是直接操控硬件电路
- 优点：程序员独享计算机资源，可以即时地调试自己的程序
- 缺点：浪费计算机资源（昂贵），一段时间只能一个人用

2. 第二代计算机（晶体管，批处理）

- 批处理系统：三台机器（代码转成磁带 IO->运算->打印机输出）
- 特点：把一堆人的输入攒成一大波输入，把一堆人的输出结果攒成一波来输出
- 优点：充分利用了计算机资源
- 缺点：按照顺序来执行，没有并发，称为串行，整个过程需要人工参与，对程序员的发展不好，不能及时排错，程序的运行是串行的

3. 第三代计算机（集成电路芯片和多道程序设计）————现代服务器的前身

- 多道技术：将 IO、运算集成在小规模的芯片集成电路上，减少了很多厂商的成本
- 串行：多个任务一个运行完毕再运行下一个
- 并发：多个任务看起来是同时运行的
  - 空间上的复用：多道在运行前先加载到内存中，保证 cpu 的快速取址
  - 时间上的复用：多个任务复用 cpu 的时间片，cpu 在多个程序之间快速切换（受操作系统控制）
    - 当任务遇到 IO 了，肯定会切换
    - 当任务没有遇到 IO 但是占用 cpu 的时间过长，也会切换
- 并发的效率不一定比串行的效率高
- 多道技术产生的背景：cpu 在执行一个任务的过程中，若需要操作硬盘，则发送操作硬盘的指令，指令一旦发出，硬盘上的机械手臂滑动读取数据到内存中，这一段时间，cpu 需要等待，时间可能很短，但对于 cpu 来说已经很长很长，长到可以让 cpu 做很多其他的任务，如果我们让 cpu 在这段时间内切换到去做其他的任务，这样 cpu 不就充分利用了吗。这正是多道技术产生的技术背景
- 当实现进程之间的物理隔离之后，分时操作系统（CTTS）出现了：多用户多任务，应用多道技术实现多个任务的并发的实现

## 进程与线程

- 进程是操作系统最核心的概念，进程所占用的内存空间是互相隔离的（物理隔离），如果不隔离的话会导致不安全性以及不稳定性
- 进程过程：操作系统控制调硬件（硬盘，cpu）来运行程序的过程
- 进程：资源单位——操作系统对于程序运行时资源相关
  - 申请内存空间->存放数据资源->运行程序整个流程
  - 一个进程里可以有多条线程，多个线程共享同一个进程里的数据资源
- 线程：执行单位——操作系统对于程序运行时代码执行相关
  - 运行程序的过程
- 比喻：操作系统相当于一个工厂，里面可以执行多个进程（开了多个车间），每个进程存放不同的程序运行时的资源（物料），每个进程（车间）里面有多个线程（流水线）

### 一个任务运行的三种状态

- 操作系统操控 cpu 来运行任务
- 运行态
- 就绪态
  - 前两者被称为非阻塞态
- 阻塞态
- 运行态->就绪态 ：操作系统认为任务占用时间过长，或者是有优先级更高的任务抢走了 cpu
- 就绪态->运行态：操作系统重新分配给该任务 cpu 执行权限
- 运行态->阻塞态：任务当碰到 IO 操作（硬盘读取）时
- 阻塞态->就绪态：IO 操作执行完毕

> 提升运行效率：降低 IO 操作，增加就绪态
