---
title: 封装计算两天日期相差天数
date: 2021/4/19
tags: [Date]
categories: Javascript
---

## 计算两天日期相差天数

### 实现步骤

- 日期格式： `YYYY-MM-DD`
- 思路：将两天格式转换为`MM-DD-YYYY`的格式，然后再取两者之差的绝对值（`Math.abs`）即可得到两天相差的毫秒，然后转成天数即可

### 函数

```js
function dateDiff(sDate1, sDate2) {
  if (sDate1 == sDate2) {
    return 0
  }
  if (!sDate1) {
    var date = new Date()
    var year = date.getFullYear()
    var month = date.getMonth() + 1
    var day = date.getDate()
    sDate1 = year + "-" + month + "-" + day
  }
  var aDate, oDate1, oDate2, iDays
  aDate = sDate1.split("-")
  oDate1 = new Date(aDate[1] + "-" + aDate[2] + "-" + aDate[0]) //转换为Mm-dd-yyyy格式,这种date的构造方式在苹果手机会报错，见解释
  aDate = sDate2.split("-")
  oDate2 = new Date(aDate[1] + "-" + aDate[2] + "-" + aDate[0])
  iDays = parseInt(Math.abs(oDate1 - oDate2) / 1000 / 60 / 60 / 24) //把相差的毫秒数转换为天数
  return iDays
}
```
